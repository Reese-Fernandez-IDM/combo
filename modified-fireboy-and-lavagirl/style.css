function drawPlayer(p) {
  if (!p.alive) ctx.globalAlpha = 0.5;

  // Calculate glow intensity based on movement
  const speed = Math.abs(p.vx) + Math.abs(p.vy);
  const baseGlow = 10;
  const pulse = (Math.sin(Date.now() / 150) + 1) * 5; // 0â€“10 pulsing
  const glow = baseGlow + (speed > 0.5 ? pulse : 0);  // add pulse only when moving

  ctx.save();
  ctx.shadowBlur = glow;

  if (p.kind === 'fire') {
    ctx.fillStyle = '#ff9e00';      // neon orange
    ctx.strokeStyle = '#a85700';
    ctx.shadowColor = '#ffb84d';    // glowing orange
  } else {
    ctx.fillStyle = '#009dff';      // neon blue
    ctx.strokeStyle = '#005b99';
    ctx.shadowColor = '#33cfff';    // glowing blue
  }

  // body
  drawRoundedRect(p.x, p.y, p.w, p.h, 6);

  // face
  ctx.shadowBlur = 0; // no glow on eyes
  ctx.fillStyle = '#fff';
  ctx.fillRect(p.x + 6, p.y + 12, 6, 6);
  ctx.fillRect(p.x + p.w - 12, p.y + 12, 6, 6);
  ctx.fillStyle = '#000';
  ctx.fillRect(p.x + 7, p.y + 13, 2, 2);
  ctx.fillRect(p.x + p.w - 11, p.y + 13, 2, 2);

  ctx.restore();
  ctx.globalAlpha = 1;
}
